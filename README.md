# Rest_Menu

[![python](https://img.shields.io/badge/python-3.10_slim-blue?style=flat-square)](https://www.python.org/)
[![fastapi](https://img.shields.io/badge/fastapi-0.100.0-critical?style=flat-square)](https://fastapi.tiangolo.com/)
[![pytest](https://img.shields.io/badge/pytest-passed-brightgreen)](https://docs.pytest.org/en/7.4.x/)


## Описание

Написать проект на FastAPI с использованием PostgreSQL в качестве БД. В проекте следует реализовать REST API по работе с меню ресторана, все CRUD операции. Для проверки задания, к презентаций будет приложена Postman коллекция с тестами. Задание выполнено, если все тесты проходят успешно.
Даны 3 сущности: Меню, Подменю, Блюдо.

## Зависимости:
- У меню есть подменю, которые к ней привязаны.
- У подменю есть блюда.

## Условия:
- Блюдо не может быть привязано напрямую к меню, минуя подменю.
- Блюдо не может находиться в 2-х подменю одновременно.
- Подменю не может находиться в 2-х меню одновременно.
- Если удалить меню, должны удалиться все подменю и блюда этого меню.
- Если удалить подменю, должны удалиться все блюда этого подменю.
- Цены блюд выводить с округлением до 2 знаков после запятой.
- Во время выдачи списка меню, для каждого меню добавлять кол-во подменю и блюд в этом меню.
- Во время выдачи списка подменю, для каждого подменю добавлять кол-во блюд в этом подменю.
- Во время запуска тестового сценария БД должна быть пуста.

## Документация

Документация представлена по адресу: http://127.0.0.1:8000/docs

## Выполненные задачи со звездами

### Реализовать вывод количества подменю и блюд для Меню через один (сложный) ORM запрос.
путь к нему src/repositories/menus.py/ строка 14:35
### Аналог Django reverse().
путь к нему src/tests/revers.py/

### Реализовать тестовый сценарий «Проверка кол-ва блюд и подменю в меню» из Postman с помощью pytest
путь к нему src/test/test_dish_submenu_check.py

### Обновление меню из Exel раз в 15 сек
путь к нему /celer.py
### Блюда по акции
путь к нему src/repositories/dishes.py строка 21:39
### тесты для нового API эндпоинта
путь к нему src/tests/test_menu.py строка 61
### Новый запрос
путь к нему src/repositories/menus.py строка 21:51
### Зависимости

Перед запуском проекта убедитесь, что у вас установлены следующие инструменты:

- Docker
- Docker Compose
- Склонируйте репозиторий: https://github.com/Rodion346/Rest_menu/tree/master

## Для запуска Тестов

1. Соберите docker-compose командой "docker-compose -f docker-compose-test.yml build"
2. Запустите docker-compose командой "docker-compose -f docker-compose-test.yml up"

В консоли покажутся результаты тестов чтобы выйти нажмите на 'Ctrl + C'

## Установка и запуск проекта

1. Соберите docker-compose командой "docker-compose -f docker-compose.yml build"
2. Запустите docker-compose командой "docker-compose -f docker-compose.yml up" добавите " -d " для скрытия логов
3. Перейдите по ссылке http://127.0.0.1:8000/docs
